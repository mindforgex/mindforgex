const{google:e}=require("googleapis"),a=(require("./gg.json"),require("fs")),{set:s}=require("lodash"),t=new e.auth.GoogleAuth({keyFile:"gg.json",scopes:"https://www.googleapis.com/auth/spreadsheets"});let r;const n={key:0,en:1,ja:2},o={},googleSheetsInstance=async()=>{const a=await(async()=>await t.getClient())();return e.sheets({version:"v4",auth:a})},getSheet=async()=>{const e=await googleSheetsInstance(),a=await e.spreadsheets.values.get({auth:t,spreadsheetId:"1JOGsmSChjLbWCVaNGBoKX-s4LPuHOW5lAjxltE5RHUc",range:"Translate!A:C"});r=a.data.values,r.forEach(((e,a)=>{if(!a)return;e.forEach(((e,a)=>{const s=Object.keys(n).find((e=>n[e]===a));Array.isArray(o[s])||(o[s]=[]),o[s].push(e)}));const s=3-e.length,t={1:["ja"],2:["ja","en"]};t[s]&&t[s].forEach((e=>{Array.isArray(o[e])||(o[e]=[]),o[e].push("")}))}))};(async()=>{await getSheet();const e=((e="ja")=>{let a={};return o.key.forEach(((t,r)=>{s(a,t,o[e][r]||o.en[r])})),a})();a.writeFileSync("ja/common.json",JSON.stringify(e,null,2))})();
